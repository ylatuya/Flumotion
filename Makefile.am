# version first -- they are parsed LTR and later options depend on automake 1.8.
AUTOMAKE_OPTIONS = 1.8 dist-bzip2 no-dist-gzip

ACLOCAL_AMFLAGS = -I m4 -I common

include $(srcdir)/common/common.mk
include $(srcdir)/common/pychecker.mk

SUBDIRS = . bin conf data flumotion doc common pkgconfig tests po

EXTRA_DIST = \
	env.in \
	LICENSE.GPL \
	LICENSE.Flumotion \
	flumotion.spec \
	misc/pycheckerhelp.py

all-local: locale-uninstalled
clean-local: locale-uninstalled-clean

# for some reason, the run is *completely* different if the last set of
# components is moved up.  So keep it low

# same for any gtk stuff - keep it low

PYCHECKER_WHITELIST = \
	    flumotion/component/*.py 		\
	    flumotion/admin/*.py		\
	    flumotion/common/*.py		\
	    flumotion/configure/*.py		\
	    flumotion/job/*.py 			\
	    flumotion/launch/*.py 		\
	    flumotion/manager/*.py 		\
	    flumotion/service/*.py		\
	    flumotion/worker/*.py 		\
	    flumotion/worker/checks/*.py 	\
	    flumotion/twisted/*.py		\
	    flumotion/ui/*.py			\
	    flumotion/component/*/*.py		\
	    flumotion/component/*/*/*.py	\
	    flumotion/wizard/*.py	 	\
	    flumotion/admin/*/*.py		\
	    flumotion/admin/*/*/*.py		\
	    flumotion/porter/*.py

PYCHECKER_BLACKLIST = \
            flumotion/common/gstreamer.py	\
            flumotion/twisted/gtk2reactor.py	\
            flumotion/admin/gtk/spyglass.py

COVERAGE_MODULES = flumotion

.PHONY: test

# generated by make check during make distcheck
DISTCLEANFILES = cache/registry/registry.xml
